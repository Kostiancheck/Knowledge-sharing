# ./debezium/application.properties

# --- Sink: HTTP client ---
debezium.sink.type=http
debezium.sink.http.url=http://nginx:80/debezium
# Optional reliability tuning
debezium.sink.http.timeout.ms=60000
debezium.sink.http.retries=2
debezium.sink.http.retry.interval.ms=1000
# Debezium adds headers prefixed with X-DEBEZIUM- by default
debezium.sink.http.headers.prefix=X-DEBEZIUM-
# If you want signed webhooks or JWT, see docs' auth options.

# --- Output format ---
debezium.format.key=json
debezium.format.value=json
debezium.format.header=json

# --- Source: PostgreSQL connector (note the debezium.source.* prefix) ---
debezium.source.connector.class=io.debezium.connector.postgresql.PostgresConnector
debezium.source.database.hostname=postgres
debezium.source.database.port=5432
debezium.source.database.user=dbz
debezium.source.database.password=dbz
debezium.source.database.dbname=postgres
debezium.source.topic.prefix=pgdemo
debezium.source.plugin.name=pgoutput

# Narrow what we capture (optional). Use schema.table include list(s) as needed.
# e.g. only the "public.customers" table:
debezium.source.table.include.list=public.customers

# Offset store (no Kafka here)
debezium.source.offset.storage=org.apache.kafka.connect.storage.FileOffsetBackingStore
debezium.source.offset.storage.file.filename=/debezium/data/offsets.dat
debezium.source.offset.flush.interval.ms=1000

# Snapshot settings
debezium.source.snapshot.mode=initial
debezium.source.snapshot.lock.timeout.ms=10000

# Remove unnecessary metadata - only keep essential fields
# debezium.transforms=unwrap,flatten
# debezium.transforms.unwrap.type=io.debezium.transforms.ExtractNewRecordState
# debezium.transforms.unwrap.drop.tombstones=true
# debezium.transforms.unwrap.delete.handling.mode=drop
# debezium.transforms.unwrap.add.fields=table,op,ts_ms
# debezium.transforms.flatten.type=org.apache.kafka.connect.transforms.Flatten$Value
# debezium.transforms.flatten.delimiter=_
